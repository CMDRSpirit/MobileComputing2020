<html>
<head>
	<link rel="stylesheet" type="text/css" href="./style/common.css">

	<title>Virtual GPS Based World Renderer</title>
</head>

<body>
	<div class="flex_body">
		<div class="horizontalLine"></div>
		
		<div class="HeaderBar">
		<div class="HeaderButton" id="btn_start">Start</div>		
		<div class="HeaderButton" id="btn_stop">Stop</div>		
		</div>
		
		<div class="horizontalLine"></div>
		
		<canvas id="gl_win"></canvas>
		
		<div class="horizontalLine"></div>

		<div id="Debug">Debug</div>

		<div class="horizontalLine"></div>

	</div>
</body>

<!-- Shader definition -->
<script id="shader_vs" type="notjs">
attribute vec2 vertex;

varying vec2 texCoords;

void main(){
	gl_Position = vec4(vertex, 0.0, 1.0);

	texCoords = vertex.xy * 0.5 + 0.5;
}
</script>
<script id="shader_fs" type="notjs">
precision mediump float;

varying vec2 texCoords;

uniform mat4 invVP;

highp mat4 transpose(in highp mat4 inMatrix) {
    highp vec4 i0 = inMatrix[0];
    highp vec4 i1 = inMatrix[1];
    highp vec4 i2 = inMatrix[2];
    highp vec4 i3 = inMatrix[3];

    highp mat4 outMatrix = mat4(
                 vec4(i0.x, i1.x, i2.x, i3.x),
                 vec4(i0.y, i1.y, i2.y, i3.y),
                 vec4(i0.z, i1.z, i2.z, i3.z),
                 vec4(i0.w, i1.w, i2.w, i3.w)
                 );

    return outMatrix;
}

void main(){
	vec2 uc = 2.0 * texCoords - 1.0;
	vec3 ray = (transpose(invVP) * vec4(normalize(vec3(uc.x, -uc.y, 1.0)), 1.0)).xyz;


	gl_FragColor = vec4(ray, 1.0);
}
</script>
<!--------------------- -->

<script src="./script/main.js"></script>

</html>